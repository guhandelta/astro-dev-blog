---
import type  { CollectionEntry } from "astro:content";
import { getCollection } from "astro:content";
import { Image } from "astro:assets";

import MainLayout from "../../layouts/MainLayout.astro";
import { formatDate } from "../../utils";

const allBLogArticles: CollectionEntry<'blog'>[] = (await getCollection('blog'))
                                                    .sort((a: CollectionEntry<'blog'>, b: CollectionEntry<'blog'>) => 
                                                        b.data.date.valueOf() - a.data.date.valueOf()
                                                    )
---

<MainLayout title="Tech blogposts">
    <section class="container mx-auto max-w-screen-xl mt-10 px-8">
        <h1 class="text-2xl pb-3">All Articles</h1>
        <!-- Main Grid -->
        <div class="grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-3">
            {allBLogArticles.map(article => (
				<div class="max-w-md mx-auto mt-10">
					<div class="bg-white rounded-lg overflow-hidden shadow-lg">
							<a href={'/articles/' + article.slug}>
								<Image
									src={'/images/' + article.data.image}
									alt="Article Image"
									class="w-full h-48 object-cover hover:opacity-75 transition duration-300 ease-in-out"
									width={600} 
									height={350}
								/>
							</a>
							<div class="p-6">
								<h2 class="text-2xl font-semibold mb-2">
									<a href={'/articles/' + article.slug}>{article.data.title}</a>
								</h2>
								<p class="text-gray-600 text-sm mb-4">{formatDate(article.data.date)}</p>
								<div class="flex flex-wrap gap-2">
                                    {article.data.tags.map((tag: string, index: number) =>(
                                        <span class={
                                            index % 2 === 0
                                                ? "px-2 py-1 bg-orange-500 text-white rounded-full text-xs hover:opacity-90"
                                                : "px-2 py-1 bg-indigo-500 text-white rounded-full text-xs hover:opacity-90"
                                        }>
                                            <a href={"/article/tag/" + tag}>{tag}</a>
                                        </span>
                                    ))}
                                </div>
							</div>
					</div>
				</div>
			))}
        </div>

            <!-- Pagination -->
            <div class="flex justify-between mt-10">
            <a href="#" class="inline-block bg-indigo-100 px-3 py-2 hover:bg-indigo-600 hover:text-white rounded-lg">
                Previous
            </a>
            <a href="#"
                class="inline-block bg-indigo-100 px-3 py-2 hover:bg-indigo-600 hover:text-white rounded-lg">
                Next
            </a>
            </div>

        </section>
</MainLayout>